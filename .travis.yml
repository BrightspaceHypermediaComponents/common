language: node_js
node_js: node
addons:
  chrome: stable
script:
- npm run lint
- |
  if [ $TRAVIS_PULL_REQUEST != false ] && [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    echo "Pull request with secure environment variables, running Sauce tests...";
    npm run test:polymer:sauce || travis_terminate 1;
  else
    echo "Not a pull request and/or no secure environment variables, running headless tests...";
    npm run test:polymer:local || travis_terminate 1;
  fi
env:
  global:
  - SAUCE_USERNAME: Desire2Learn
  - secure: fFWvo2eNct0221L3bvp0kukLU30FRBy2rKB5fyxBiwA85etzxrOLOITt851nJxhi/I0Uo6bJp9fOQDrfWHvzdksNY0Cpw7CuDcavSeurQL+k43cOX86dlvGUElwPI6qfaUmKwF0ut5i9db9fCJrct9bFHMPDL1UKFX63uKIuXyA96Ta/maQ1WPL9jSq6cb2AV9ipW6pgtIqe4ybxJcEHPaDxsmJxOGE09mrl0aJkq5Ea5J+A1Ma4/b8zwKBasKukOJYXWgm8OLy8twlsOZchX1Fh3azpvbOVObTsiAhbSev/xkNprUbS84RiTmUSBWSI5+5iI23glucBjJ3cb461DpqR8qngwZv7s9oR0G+lEA/OQPt5MxPvX+mj/DaX3Flr/W5JHgqq+QIZRcVEQOvxKdKQhxT1z7Q2y5eKkUtIR8ji7ThA5pYV5CfYGsfMu1Rni/740Rj4cw3crjmZnV6js4cuZ3JKQapVPd96nZ9q7g9s5WhxMbj/LN6JdO3EgsJJePXQP81ND6tuuRmCF5d8iPa47KoPS4XBRSjEyO7S0V+dXSuWqZTX/ugupz+LiOGdtBJX6gbUoDHku8d9EDuqdlvz38hFw/CQ/leF+I48H+h/VLpT3GLoMeFBtjrGEyp/9ZQ4hKj0req1Y+1o48UuaCDyn5NIdNv2cORu/Yqjfm4=
